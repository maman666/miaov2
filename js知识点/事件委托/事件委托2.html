<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <script type="text/javascript">
    /**
     * 事件委托：利用冒泡地原理，把事件加到父级上面，触发执行效果
     *     1.可以提高性能
     *     2.新添加的元素还有之前的事件
     *
     *event对象：事件源：不管在哪个事件中，只要你操作地那个元素就是事件源
     *ie下：window.event.srcElement  标准下：event.target
     *
     *  target：找到的是整个元素 可用来做效果执行的事件
     * nodeName:找到当前元素的标签名 找到地大写转为小写 toLowerCase() 可用来做判断要执行的事件
     */
    window.onload = function(){
        var oUl = document.getElementById('ul1');
        var aLi = document.getElementsByTagName('li');
        var btn = document.getElementById('btn');

        var iNow = 4;

        // for(var i =0; i<aLi.length; i++){
        //     aLi[i].onmouseover = function(){
        //         this.style.background = 'red'
        //     }
        //     aLi[i].onmouseout = function(){
        //         this.style.background = ''
        //     }
        // }
        
        //事件委托
        oUl.onmouseover = function(ev){
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            console.log(target.nodeName)
            if(target.nodeName.toLowerCase()=='li'){
                target.style.background = 'red';
            }
            
        } 
        oUl.onmouseout = function(ev){
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            if(target.nodeName.toLowerCase()=='li'){
                target.style.background = '';
            }
        } 
        
        btn.onclick = function(){
            iNow++
            var oLi = document.createElement('li');
            oLi.innerHTML = 111*iNow;
            oUl.appendChild(oLi);
        }
    }
    </script>
    <body>
    <input type="button" value="点击添加" id="btn" />
    <ul id="ul1">
        <li>111</li>
        <li>222</li>
        <li>333</li>
        <li>444</li>
    </ul>
    </body>
</html>