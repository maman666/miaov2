<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>地图</title>
		<link href="../css/mui.min.css" rel="stylesheet"/>
		<style>	
			#bdmap{
				height:300px;width:100%
			}
		</style>
		<script src="../js/mui.js"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=x4RLsqK9mFnB0Vf3QiNLvSMAVmuhWqPe"></script>
	</head>
	<body>
		<div id="bdmap"></div>
		<script>
// 			mui.init({
// 				keyEventBind: {
// 						backbutton: false,  //Boolean(默认true)关闭back按键监听
// 						menubutton: false   //Boolean(默认true)关闭menu按键监听
// 				}
// 			});
			document.addEventListener( "plusready", plusReady,false);
			
			function plusReady(){
				plus.geolocation.getCurrentPosition((position)=>{
						//获取当前经度维度
						let {longitude,latitude} = position.coords;
						console.log(position)
						
						var map = new BMap.Map("bdmap");
						
						map.centerAndZoom(new BMap.Point(longitude, latitude), 18);  // 初始化地图,设置中心点坐标和地图级别
						// map.centerAndZoom('广州', 1);  // 初始化地图,设置中心点坐标和地图级别(自大级别19)
						
						
						var stCtrl = new BMap.PanoramaControl(); //构造全景控件
						stCtrl.setOffset(new BMap.Size(20, 20));
						map.addControl(stCtrl);//添加全景控件
					}, ()=>{
						
					}, {
						enableHighAccuracy:true
					});
			
			}
			
		</script>
	</body>
</html>
